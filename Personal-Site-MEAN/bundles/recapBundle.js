!function(){"use strict";angular.module("recapApp",[])}(),function(){"use strict";function t(t){function s(){return t.get("/recap/getConvert/"+e)}function r(){return t.get("/recap/participate/"+e).then(n).catch(i)}function n(t){return JSON.parse(t.data)}function i(t){return t}return{participate:r,convert:s}}var e=(new sixpack.Session,"test2");angular.module("recapApp").factory("sixpackService",t),t.$inject=["$http"]}(),function(){function t(t){function e(e){return t.get("/recap/getArtistSetlists/"+e).then(n).catch(i)}function s(e){return t.get("/recap/getVenueSetlists/"+e).then(n).catch(i)}function r(e){return t.post("/recap/postSetlistSongs/",e).then(n).catch(i)}function n(t){return t.data}function i(t){return t}return{getArtistSetlists:e,getVenueSetlists:s,postSetlistSongs:r}}angular.module("recapApp").factory("setlistService",t),t.$inject=["$http"]}(),function(){"use strict";function t(t,e,s){var r=this,n=s.$$absUrl,i=n.split("?code=")[1].split("&state="),c=i[0],a=sessionStorage.playlist;t.post("/recap/savePlaylist/"+c,a).then(function(t){r.playlistUrl=e.trustAsResourceUrl(t.data)}).catch(function(t){console.log(t),r.error=!0})}angular.module("loggedInApp",[]).controller("LoggedInCtrl",t),t.$inject=["$http","$sce","$location"]}(),function(){"use strict";function t(t,e,s,r){function n(){var t={apiSettings:{url:"/recap/getArtists/{query}",onResponse:function(t){var e={results:[]};return t.success?$.each(t.artists,function(t,s){e.results.push(s)}):e.results=[{title:"Not Found",description:"Try typing more characters"}],e}},fields:{results:"results",title:"title",image:"image"},minCharacters:3,onSelect:function(t,e){0!=t.success&&f.getArtistSetlists(t.title)}};return t}function i(t){s.getArtistSetlists(t).then(function(e){return f.selectedArtist=t,l(e,f.selectedArtist,t)}).catch(function(e){f.selectedArtist=t,f.error=!0})}function c(t){if(!t.sets)return f.selectedSetlistId=t.id,void a();f.selectedSetlistId=null;var e={sets:JSON.stringify(t.sets),artist:t.artist,title:t.artist+" @ "+t.venue};$("body, .header").css("cursor","wait"),s.postSetlistSongs(e).then(function(t){return f.playlist=t,a(),t}).catch(function(e){f.selectedSetlistId=t.id,a()})}function a(){$("#stepTwo").removeClass("active"),$("#stepThree").addClass("active").removeClass("disabled"),$("body, .header").css("cursor","auto")}function l(t,e,s){return $("#stepOne").removeClass("active"),$("#stepTwo").addClass("active").removeClass("disabled"),e!=s&&($("#stepThree").addClass("disabled"),f.playlist=null),404!==t.status&&500!==t.status?(f.setlists=t,t):void(f.error=!0)}function o(t){s.getVenueSetlists(t).then(function(e){return f.selectedVenueId=t,l(e,f.selectedVenueId,t)}).catch(function(e){f.selectedVenueId=t,f.error=!0})}function u(){return new Promise(function(t,e){r.participate().then(function(e){t(e.alternative.name)})})}function p(t){var e=$("#"+t).get(0);e.paused?e.play():e.pause()}function d(){sessionStorage.playlist=JSON.stringify(f.playlist),e.open("/recap/templates/spotifyLogin.html","Login to Spotify","width=700,height=500,left=100,top=100")}function h(){var t={apiSettings:{url:"/recap/getVenues/{query}",onResponse:function(t){var e={results:[]};return null!=t.success&&0==t.success?e.results=[t]:$.each(t,function(t,s){e.results.push(s)}),e}},fields:{results:"results",title:"title",description:"description"},minCharacters:3,onSelect:function(t,e){0!=t.success&&f.getVenueSetlists(t.id)}};return t}var f=this;f.artistSearch=n,f.getArtistSetlists=i,f.getSetlistSongs=c,f.getVenueSetlists=o,f.participate=u,f.playPreview=p,f.spotifyLogin=d,f.venueSearch=h,f.error=null,f.playlist=null,f.setlists=null,f.selectedArtist="",f.selectedSetlistId="",f.selectedVenueId=""}angular.module("recapApp").controller("SearchController",t),t.$inject=["$http","$window","setlistService","sixpackService"]}(),function(){function t(){var t={restrict:"E",templateUrl:"/recap/templates/songList.html"};return t}angular.module("recapApp").directive("songList",t)}(),function(){function t(){var t={restrict:"E",templateUrl:"/recap/templates/steps.html"};return t}angular.module("recapApp").directive("steps",t)}(),function(){function t(){var t={restrict:"E",templateUrl:"/recap/templates/showSelect.html"};return t}angular.module("recapApp").directive("showSelect",t)}(),function(){function t(){var t={restrict:"E",templateUrl:"/recap/templates/playlistSearch.html",controller:"SearchController",controllerAs:"sc",bindToController:!0,link:function(t,e){$("#stepOne").click(function(){$("#searchPrompt").removeClass("ng-hide"),$("#showList").addClass("ng-hide"),$("#songList").addClass("ng-hide")}),$("#stepTwo").click(function(){$("#searchPrompt").addClass("ng-hide"),$("#showList").removeClass("ng-hide"),$("#songList").addClass("ng-hide")}),$("#stepThree").click(function(){$("#searchPrompt").addClass("ng-hide"),$("#showList").addClass("ng-hide"),$("#songList").removeClass("ng-hide")});var s=t.sc.artistSearch();$("#searchPrompt").search(s)}};return t}angular.module("recapApp").directive("playlistSearch",t)}();